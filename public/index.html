<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEKRO_PYTHON_DIVERSE</title>
    
    <script src="https://cdn.jsdelivr.net/pyodide/v0.25.0/full/pyodide.js"></script>

    <style>
        * { box-sizing: border-box; }
        body { background: #050505; color: #00ff41; font-family: 'Consolas', monospace; margin: 0; display: flex; flex-direction: column; height: 100vh; padding: 20px; }
        .header { text-align: center; border-bottom: 2px solid #00ff41; padding-bottom: 10px; margin-bottom: 20px; text-shadow: 0 0 10px #00ff41; }
        .main-box { flex-grow: 1; display: flex; flex-direction: column; gap: 10px; }
        textarea { width: 100%; height: 60%; background: #000; color: #00ff41; border: 1px solid #00ff41; padding: 15px; font-size: 16px; outline: none; box-shadow: inset 0 0 5px #00ff41; }
        .controls { display: flex; gap: 10px; }
        button { background: #00ff41; color: #000; border: none; padding: 12px 25px; cursor: pointer; font-weight: bold; text-transform: uppercase; transition: 0.3s; }
        button:hover { background: #fff; box-shadow: 0 0 20px #00ff41; }
        button:disabled { background: #333; color: #666; cursor: not-allowed; }
        #output { flex-grow: 1; background: #000; border: 1px solid #333; padding: 15px; overflow-y: auto; white-space: pre-wrap; color: #00d9ff; font-size: 14px; border-left: 4px solid #00ff41; }
        .loading { color: orange; font-style: italic; }
    </style>
</head>
<body>

<div class="header">
    <h1>[ NEKRO PYTHON HOST - DIVERSE ]</h1>
</div>

<div class="main-box">
    <div id="status" class="loading">Inisialisasi Python Engine... (Tunggu Bentar)</div>
    
    <textarea id="code" placeholder="Tulis kode Python lu disini...">
import sys
print("Sistem Python Diversed Aktif!")
print(f"Versi Python: {sys.version}")

def greet(name):
    return f"Halo, {name}! Script ini jalan di dalam HTML."

print(greet("Nekro"))
    </textarea>

    <div class="controls">
        <button id="run-btn" onclick="runPython()" disabled>EKSEKUSI (RUN)</button>
        <button onclick="clearOutput()">BERSIHKAN</button>
    </div>

    <div id="output">Output log akan muncul disini...</div>
</div>

<script>
    let pyodide;
    const outputElement = document.getElementById("output");
    const statusElement = document.getElementById("status");
    const btn = document.getElementById("run-btn");

    // SETUP ENGINE
    async function initPyodide() {
        try {
            pyodide = await loadPyodide();
            statusElement.innerText = "● ENGINE READY: Python WebAssembly Loaded.";
            statusElement.style.color = "#00ff41";
            btn.disabled = false;
        } catch (err) {
            statusElement.innerText = "❌ Gagal memuat Python.";
            console.error(err);
        }
    }

    async function runPython() {
        const code = document.getElementById("code").value;
        outputElement.innerText = ">>> Running...\n";
        
        // Redirect stdout ke div output
        pyodide.setStdout({ batched: (str) => {
            outputElement.innerText += str + "\n";
        }});

        try {
            await pyodide.runPythonAsync(code);
        } catch (err) {
            outputElement.innerText += "\n[ERROR]: " + err;
        }
    }

    function clearOutput() {
        outputElement.innerText = "";
    }

    // Jalankan inisialisasi saat page diload
    initPyodide();
</script>

</body>
</html>
